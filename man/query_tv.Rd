% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/newsflash.r
\name{query_tv}
\alias{query_tv}
\title{Issue a query to the TV Explorer}
\usage{
query_tv(query, context = NULL, network = "National", timespan = "ALL",
  start_date = NULL, end_date = NULL, timelinesmooth = 0,
  datacomb = "separate")
}
\arguments{
\item{query}{primary keyword}

\item{context}{context keywords, with separate keywords in list format 
(optional, but see web site for details on why this is a useful parameter)}

\item{network}{filter by network. Use \code{list_networks()} to see valid values
and to get a hint about valid date ranges for \code{start_date} and \code{end_date}.
Defaults to \code{national}.}

\item{timespan}{if "\code{all}" (the default) all possible timeline data will be returned
(there is a max number of timeline results and that limit is changing regularly enough
that you need to check the site to know what it is). If not "\code{all}" then you
must specify \code{start_date} and \code{end_date}.}

\item{start_date, end_date}{start/end dates for search if \code{timespan} is
not "\code{all}". Can be a \code{Date} object or an ISO character date (e.g. \code{2016-11-12}).
Use "" (empty string) for most current date.}

\item{timelinesmooth}{a smoothing value applying moving averages over 15-minute increments}

\item{datacomb}{if "\code{combined}", all network volume is combined into a single value.
Defaults to "\code{separate}".}
}
\description{
Successful queries (API errors tend to be date-range related but there
isn't enough to go on in the API response to provide better diagnostics)
result in a list of 4 tidy tibbles:
}
\details{
\describe{
\item{\code{query_details}}{spits back what you put in.}
\item{\code{timeline}}{a long tibble of the number of times
the keywords combo was on a particulare station.}
\item{\code{station_histogram}}{what it says it is.}
\item{\code{top_matches}}{also what it says it is except
that it includes juicy metadata with the Internet Archive preview URL,
thumbnail URL, \emph{caption text snippet} and more.}
}

See the Reference URL for more detailed parameter info.
}
\section{Queries}{


Queries resulting in no matches will display a message and return \code{NULL} invisibly.

Both query fields support "OR" queries by including search terms in a list (e.g., 
query_tv(query = c("Trump", "Obama")).

There is a maximum of 2,500 results per query. If you need to return more results than
this, split your query time frame up into multiple smaller date ranges (ie, if your query
returns 3,000 results over a 30 day period, split it into two 15 day period queries).

When specifying dates and the time period is 7 days or less, the timeline result will
switch from daily resolution to hourly resolution to make it possible to examine how
coverage of a topic changed over the course of a day and when each network first started
discussing it.
}

\examples{
query_tv("terror", "isis")
query_tv("british prime minister")
query_tv("mexican president")
}
\references{
\url{https://blog.gdeltproject.org/gdelt-2-0-television-api-debuts/}
}
